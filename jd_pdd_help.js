/*
PDD特价转盘助力

入口：特价版APP——幸运抽奖
链接：https://pro.m.jd.com/jdlite/active/23CeE8ZXA4uFS9M9mTjtta9T4S5x/index.html

环境变量：
JD_PDD_InviterId // 指定助力码 非必须，不填默认助力账号一
JD_PDD_NUM // 指定人数  非必须，不填默认跑全部账号

cron:1 1 1 1 *

*/

const $ = new Env('PDD特价转盘助力')
var iｉl='jsjiami.com.v7';const IiII=iii1II;(function(l1l11i,l1iIl,illIll,iIli1I,Iiil1,iiilli,l1iIIl){return l1l11i=l1l11i>>0x1,iiilli='hs',l1iIIl='hs',function(iiilll,lI11Il,lIII1i,l11i11,IilIl1){const l11i1I=iii1II;l11i11='tfi',iiilli=l11i11+iiilli,IilIl1='up',l1iIIl+=IilIl1,iiilli=lIII1i(iiilli),l1iIIl=lIII1i(l1iIIl),lIII1i=0x0;const lIII1l=iiilll();while(!![]&&--iIli1I+lI11Il){try{l11i11=parseInt(l11i1I(0x1e9,'@oC)'))/0x1*(-parseInt(l11i1I(0x219,'4mR*'))/0x2)+-parseInt(l11i1I(0x1a1,'&)ud'))/0x3+-parseInt(l11i1I(0x205,'m@)p'))/0x4*(-parseInt(l11i1I(0x19e,'TwHr'))/0x5)+parseInt(l11i1I(0x185,'RtU9'))/0x6*(-parseInt(l11i1I(0x134,'Anvv'))/0x7)+parseInt(l11i1I(0x131,'OIw3'))/0x8*(parseInt(l11i1I(0x1b5,'8zli'))/0x9)+-parseInt(l11i1I(0x119,'x*3x'))/0xa+parseInt(l11i1I(0x1ac,'^gx5'))/0xb;}catch(l1iIIi){l11i11=lIII1i;}finally{IilIl1=lIII1l[iiilli]();if(l1l11i<=iIli1I)lIII1i?Iiil1?l11i11=IilIl1:Iiil1=IilIl1:lIII1i=IilIl1;else{if(lIII1i==Iiil1['replace'](/[UxGIQHVWSYpkTKnFbMXJCu=]/g,'')){if(l11i11===lI11Il){lIII1l['un'+iiilli](IilIl1);break;}lIII1l[l1iIIl](IilIl1);}}}}}(illIll,l1iIl,function(lilIi,l1l11I,lilIl,IilIlI,iIli11,Iiiil,Iiiii){return l1l11I='\x73\x70\x6c\x69\x74',lilIi=arguments[0x0],lilIi=lilIi[l1l11I](''),lilIl=`\x72\x65\x76\x65\x72\x73\x65`,lilIi=lilIi[lilIl]('\x76'),IilIlI=`\x6a\x6f\x69\x6e`,(0x169bd9,lilIi[IilIlI](''));});}(0x184,0x7d5bc,Iii11l,0xc4),Iii11l)&&(iｉl=0xc4);const notify=require('./utils/Rebels_sendJDNotify'),jdCookie=require(IiII(0x224,'#dI[')),common=require(IiII(0x22a,'XVvf')),{H5st}=require(IiII(0x1b0,'RtU9')),isNotify=process[IiII(0x19b,')8zk')][IiII(0x20b,'@oC)')]===IiII(0x14b,'WCRG'),pddcode=process['env']['JD_PDD_InviterId']||'',pddnum=process[IiII(0x164,'YKfE')][IiII(0x229,'x[ae')],linkId='Wvzc_VpNTlSkiQdHT8r7QA',PDD_WAIT='1';let waitTimes=parseInt(PDD_WAIT)*0x3e8;function Iii11l(){const Iiill=(function(){return[...[iｉl,'QSTkjMxsbjiXXKaYmVJiGFb.CUncuIopbmHW.Jv7==','W4rYDKFdHIO','WOFdPCoaWRlcISkCW6S','W6brWRBdICkhpW','WPFdRSks','W4bYzhJcSa','WO/dUCoOx8oDWQ5T','WRe5WRpdGb4','FSklsfuwWOxdI1anECkscIOgWO7cGe3dRXyKW6iMjeTgW47dRYNcJmogACkNrG','W7LfW5RdVSk8cq','kmkVWPlcICo8','wmk6emoOW5vfkvXanLDPo8oLW6DKW4X0tCkrWQWIwa','hsZcIgv2amk8k8k9W4tdSq','kJNdMWJcUG','jCk7AWddLCk1','laddOwLrqehdLCodW7lcH8omW73dTa','4P2NgoAYOoADTEwjQEwjIEAVL+AwJq','WP4qWQW','WQasEmkSW4pcJ8kS','WPShF29frG','kaxdLGJcNa','fcNdTXRcJa','4P6EWRpKUytOGBxOHBxLTz3LIPpLI4ZOHjNLTR8','d1VcOG/cP8kKW7RcNq','W4iWWQGpyKW','E8kmwW','j8oDjdT8WQhcQttdS8kxfq','WO7cRuHL','sqrY','WQadymkSW57dGmoUDmoRy0bhWOCdW7pcP1xdGY9C','WQLtW7u','vSkXeSojWPrtgW','W4TJW7pdPW','dIBdPJZcOSoFiJmbWRtdJSkbFa','WPRdOCobWQdcHSkiW4RcOCo0ma','W5fiBMdcTq','W41Tefbe','WRRdMmoLWONcGW','wmoGCmogWR/cQqu','WQ3cUYtdVJ4','fdRdV05FeG','rW51BSkrwCkP','W5pdV1P5va','4P+evoA2P+IUN+I/KUMaSUAcTos6QwZdLM9g4P2zW5ZMNQJLIBJNIjtMGRRMR6dLUPqQt8o5cG','gYxcGMnYqCkgx8kUWPdcR8k1CSoUWRLZW7iYWRRdSSoMW4JdQ3Cxi2NcThHfW6fT','qSkNwNqz','W75EW5ldNmk9','WOJcRvzO','W4jkWP3dHSk/','WP7dSSogWQq','qJxcNq','WRNcOSkyWQ4pW6XgW67cTmo4w8klW6NdUdfyvmker8koyw8','W49yEflcJq','vGZcMqe','W7SBWP8','dmo+WO/dOSkta8knl8kifmoSWOq7bK9BWQuWaGdcNCoSWQjktsRdT8oWgYeAl8k/m8oDWQxdHM8OWQ5opCoslqnkW6xdUMr1hxzQW64xW6VdP8kzoGhdV23cKMJdJmoZWQOvW5xcUW7cS8kiW6/dSHZdJ37cJmk/W64eaINcTKJdSc3dN8krW4ddQmk0gCodW7bBWO42wtdcH37dSmkpW7CwW6VdOCodrZnAEuXIyu4EWO3dRWaZsCkzW57dTSoYeSohAmk7ev7cVSo0W5SuW6yhrmo4sSosw8o4WO3cQML1W7pcS21kW5BdRW','W5jDWP/cNmk0iCk4WOZdJdq5W4XUWRrrxCkjrCofqGms','W79utehcTYlcSq','WPZdKM0','imokcHayWPZdLeKezCkBrMa','lmk+WPlcVmojWQW','W7fqq0tcOq','5P2h6i++5y2f5yMI5PAM5O+1yEIUS+MgOUAvKoI9T+IIOa','W6nEC0xcQZ7cSSkD','ks7dTrRcRG','WPNdTCoqWQlcJSkiW70','W57cHmkGWOZdGmoDWOOjW6pdLCk0Cmo8WRCdW50+WP/dImoYW6LbySoromoZWPqXs8kXjvRdLMJdMSoUW6JcPtS5W4WvWRC','n8kZyYZdI8kHWPpdPMCk','WORcQvvQWR3cJW','w8kWea','WPldISoQWORcMW','wmk6aSoKW5K','WOxdMNddSG','DmkAra','W7hcQmkt','wmk9e8oLW7q','WOmcwCklBrpcTCo2W44+W58','gqzVWOfQ','qLzLgCk4','esRdVba','WO/dSSobWOZcMmkC','WOyZBSkVWPxdUa','rSkxEx8dWRxcNbW','DSowWRa','E8kAt1znW43cGq','W7riWRRcLq','8yoiMd0','yv4w','kmo/WPhdRSkh','4P+SrUw9GUwjHUwkG+wkSow2OEI/SEwlMEAnN+wTG+wiSowlTos7JoAuTE+/NoMaVUwgIU++Ga','WPxcUvHUWQZcLmkc','WPddLCkJWOldOG','W7LwW7xdJmka','tarMF8kkrG','oqLnWOTH','WOFdOcZdUSorW41xmG'],...(function(){return[...['W47cVmolFc9at8ongwG','lWtdOuS','rSk7EgbcW44','44gr5O2b56Ep44kA6kYi5ysN6i2B5y+wW75vWRpdJ3Ok','nIf6','4P6MWQdOHQNMN63OVlVOORFPG4NLI7dKUiBPLyJORBHQ','ksz8W4dcKCoXW4yNoSogCY4','fqpdIHNcPG','W7NcGmoMyai','WRSfw8opWPBcPJVdVwbvW6JcVbyGf8okW7pdUbLcphZcH8odu8kzW5K1W77dRNHoASk8W7qBW5NdTsTjm8kQiW','cEIVOUAZSUwLOUI1OLxINBHg5PsO5zgQ5BIk5PAG5OYO','haK1mSknWQBcOmkVW54','Ft7cSSkJWR4','WQ/cMCk6WPtdU8oFW5K','FSofWRi4WOqT','WQeAz8kixW','W73cQSoLtte','D8oyWQC','W5hdIKvexIDfhG','WO/dOSkfW7BcIq','W78hWOS','t8oElcPP','W54YDW','qthcQCodbq','WOi3ECkRWQe','8l6yKGa','W4yYq8oiWPFdV8o8aG','eYBdRbZcIhpcRXmkWOBcHmoyWRjgW4/cQ8oOWO/dGq','W4u8ECoi','4P++WQhLIzZLIktMIBdLI6H3WQu','WQBcMdZdUYpcQSorB191','WOFcVeTHWQdcHmkqaxxdSSkjySkXW5JdUa7cN8kLWORcVs1PhquZWOekWRtdKmkPWOzEpq','gYfUWPnW','l8k5WOG','4P+Gm+whNUwKPowYMoE6RqpdMhddOa','txtdHdi','WQnbWQGtze/dICoU','WP4hEh8','c8oPpb0','ggldMSk6xvrcW5dcN2nZWOa','WRuxWRZdMae','sSoyoaHGnxVcG8keW64','jSkZWPBcUCoD','W6NcV8oACae','zCkNeSowW48','D8kTkmoqW40','WO/cNmobWQib','WP/dOmkbW54','4P2Qo+wlQ+wjRoEHN+ACLUwGUEwfUq','W5LZc211','jMhdPmoXW7pdV8kOWOpcLmo/h8kIxSkM','4O+S77UWhow3L+w8RowsHEA3N+wkM++9RUwiREAFQoAxKUMxRo+8Qq','ddZdPZRcUCoPdISlWOu','W7qvWO8/Da','brD0cmkPWR7cHCosW73dTXtdRH/cGCk4W4i','WQ1dW7VcPSkv','gW1YWPC','WQP4W6xcPSk9','WQtdGhJdPCoYqfK7','W7ieWQhdG8ottmoWBbiiWOVdRSof','y8oxdb9M','WQBdVbRdVmoTW4vuma','Ft7cOmkVWRlcOSoU','hZZdVrFcUmo/','W7KvWOulyW','W75yvvxcJa','WOqcWQldGW','C8kAtwu','WO/cOK1KWR3cGSkd','katdOuLw','WRddPmovWPVcHG','WOaiz2jEtIe','W7fbW59Ynq','v8k4cCoUW5m','W7qDWOiRyetdQG','WOtdS8o7uSkAWQ8','WOhdSSoQFSkCWRHFmKvZWQ7cK8k/W6pdNmkvW4S','jSk4WPK','pqNcKbTt','WPRdVCoYC8khWRa','W7bwWRtdJCkd','4P22WPNLI6pLI7lNOiZLPBFMLBFVV67ORiFLH4FLJ7pLVkdLKiVMLkBKUR3OV5NMT4xLI6JLKOFLHyhOVkBOO4JLKj7VV54','W4pcPSoy','FmosWRq9W4i5jq','rmoAlCkgW6hdR17dKmoJF8kTW7KW','W5qnWQiBya','crfYWP0/i8oPW7jHfvWZomk+i0BcS8o8ma','4P6uW4ZMTPVLIAVNGklNIRi','W7VcISkMWRxdMW','WOxdTCohWOFcH8kAW6K','DttcQCoclq','W4DUga','WPK6ACkmwW','WQhdUYJdUSo6W4vuiCkAoSk1W6e','F8krwebu','p8kBWPNcNCoP','wCkqxw8F'],...(function(){return['Cmktu0PE','W7ZdS8k6W4/cSCkzW4P1','bmk9lmkcW6pdPqFcGmkXp8oAWPK','WPZdRmokySk7','dCoJoXqTxG','xLVdMaOX','W75FvLJcRtlcMSktWOm7f8oUWPyPW5HfaLntrWWtWP8','cCoSgsHAl0y','asBdTa','WR7dVc4','zmoFuCoHWPG','uSoSzSo7WQlcUW','4O2H77IJWOdMNPNOGllMRi3NOBxOJP3LJR7LIkFLIRtLIlRNO63VVzNPGjBLHkxMIj7OOO7VVOK','W5NcQSouCCklWO1yna','rZlcPbX1beq','osVcOrLS','W6JOROdMSzBLP63OTOJdMUkDNxS','WORdQmkgWOtdHhddUmkPgWWVW4RdPXK6w8oT','WOKLFG','W5eBWOi+AuBdP8kPfSkbmsK','WP3dOCo2WRVcPW','DCkiC2i/','W7XgWQK','WRZdUIRdO8orW41xmG','sZ/cNG','m8o0WOtdVSkAhmky','AY7cSdZcKG','WONdQCkzWOm','WOOVASklWPldUHtcO0L5WRNcNdmSemoIW4pcUIv+aYxdLW','CZxcOSkkWQFcS8o5W4JcPSo4hSk8D8kIk8oxW7ycDCknWQ7dL3S','wahcHqBcTG','q8oWF8ovWRtcRXS','WPpdSSkVWP3dMxS','xatcKctcT8kt','EdxcUmkHWRlcRW','4P61yEACTUwIIEwfV+AoMowVIowjO+wkOEwpKUMeN++/V+w9NEwMPEwlNowiN+I2IUwmVXShmq','W6bPWOJdNCkK','gItdQX0','W4SHWOi7qa','tHpcVmoRkq','W7bTWOVdGmk8','CSkuBgeKWRFcKa3dR8kBfgeRW5NcLa/cU8oaWRpcMmojtW7dNSkWW73cLftdKv7dQNHl','l8kbW7rdW4D+gCoPWQ/dKI3cQq','AH9awmkQ','WQ/cMCk6WPtdU8olW5K','W614zxBcLW','t3u0WP4QwrtcICottsSAWO7cVmo5i1a','v8oklq','pIpcQa1MkwiLdCkbWPBcRfu','WQqyCW','WPBdLMNdMSozuKC/egK','nCoKWPZdRmkkdSkczW','W6bts2hcRq','W5y8zmoD','r1DM','W6mcWQCbAW','4O2r77Iox+I0MEwpGCkZWQBdJoM4O+IUGowmPEwiQ+wlUUs8IUIcTa','W4FcVColzdmii8kndx9GW5fNACoRWQ7dRthdPHmSW57dIXuwfrldTmoAWPq9WQb4AvyAreZdG8kYx8kZBCkGuSoNjN8SW7pdI0hcISoWWPBcMdGFE38Btmk8uf/cQCoPWPj2krKoiWu','WQVcGmojWQaS','4P6ev+ACVUIaOEAVJUEILowNHEErNCk7','kmo/WOpdOSklcSkQACoosCk1W4T9lxPvWQuSaNpdKSocWPC','WOOjDw4','cmkoEva0DKZcLmkKW5SzAq','WQ7cGZ7dUJJcVCoG','y8o0tmovWOa','WRfcW7JcSCkkgq','uCoMAmoFWQFcTrZcJCk/nCocWRSdgxHnWQexDa','WQOzW6tdQSkNcufa','W4jqW7ZcGeFdK8oahaNcISkDCeu','WQldQmoDDCk6','vbTxt8kR','4P2LnEwiMEwlIoEHHUwLHoAwRo+9QUs+LoIcOUAETow/KowrQEA3RowjTo+9Ha','W69rWR8','WOhdPSovCanDy8ojfgG','sSomoqe','W4e4zmo/WORdUCo5de0','jWRdSG','W5W2y8oSWQi','W6ffig9YWQZdImoFWQ5P','h8o7e8o1W4HmhbPHifXJoCouW51OW4Dfr8k0WQ4GuW','m8oKWPVdJSkrcW','omkIWPdcJCocWRO','jSo0WPVdNSk+','W6LnW47dL8kGaW','WO8UEW','xsFcJmkYWOq','WR3cOCo1WO8o','qWPVBCkzqmkPWRtdOCoiEa','W5CVySoXWPBdSq','WOCmWPJdGWlcI8kFpq','sa5GxSkDrSk/','WRhcGSowWQO9W5f2WRtcPmo/bSkGW7tdLanFeG','qdxcJq','hYdcHMzZq8ouhmkUW5/dSSkYpG','W43IJjFVUyFcS+wlPEwjG+EIK++8MG'];}())];}())];}());Iii11l=function(){return Iiill;};return Iii11l();};$[IiII(0x140,'ny*g')]=0x0,$[IiII(0x17c,'HH^z')]=![];function iii1II(_0x4d1838,_0xd93ca6){const _0x6aa1d3=Iii11l();return iii1II=function(_0x576316,_0x3e323a){_0x576316=_0x576316-0x110;let _0x191ef0=_0x6aa1d3[_0x576316];if(iii1II['AQNYxE']===undefined){var _0x4f52bf=function(_0x2363bb){const _0x3445a5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x33a35a='',_0x264324='';for(let _0x7279dc=0x0,_0x2206bf,_0x53662b,_0x59c25a=0x0;_0x53662b=_0x2363bb['charAt'](_0x59c25a++);~_0x53662b&&(_0x2206bf=_0x7279dc%0x4?_0x2206bf*0x40+_0x53662b:_0x53662b,_0x7279dc++%0x4)?_0x33a35a+=String['fromCharCode'](0xff&_0x2206bf>>(-0x2*_0x7279dc&0x6)):0x0){_0x53662b=_0x3445a5['indexOf'](_0x53662b);}for(let _0x3d27df=0x0,_0x49563a=_0x33a35a['length'];_0x3d27df<_0x49563a;_0x3d27df++){_0x264324+='%'+('00'+_0x33a35a['charCodeAt'](_0x3d27df)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x264324);};const _0x1425d1=function(_0x35c8f4,_0x41b85c){let _0x428d43=[],_0x421b4e=0x0,_0x381b43,_0x3b60e3='';_0x35c8f4=_0x4f52bf(_0x35c8f4);let _0x1b8ab7;for(_0x1b8ab7=0x0;_0x1b8ab7<0x100;_0x1b8ab7++){_0x428d43[_0x1b8ab7]=_0x1b8ab7;}for(_0x1b8ab7=0x0;_0x1b8ab7<0x100;_0x1b8ab7++){_0x421b4e=(_0x421b4e+_0x428d43[_0x1b8ab7]+_0x41b85c['charCodeAt'](_0x1b8ab7%_0x41b85c['length']))%0x100,_0x381b43=_0x428d43[_0x1b8ab7],_0x428d43[_0x1b8ab7]=_0x428d43[_0x421b4e],_0x428d43[_0x421b4e]=_0x381b43;}_0x1b8ab7=0x0,_0x421b4e=0x0;for(let _0x3c8bd8=0x0;_0x3c8bd8<_0x35c8f4['length'];_0x3c8bd8++){_0x1b8ab7=(_0x1b8ab7+0x1)%0x100,_0x421b4e=(_0x421b4e+_0x428d43[_0x1b8ab7])%0x100,_0x381b43=_0x428d43[_0x1b8ab7],_0x428d43[_0x1b8ab7]=_0x428d43[_0x421b4e],_0x428d43[_0x421b4e]=_0x381b43,_0x3b60e3+=String['fromCharCode'](_0x35c8f4['charCodeAt'](_0x3c8bd8)^_0x428d43[(_0x428d43[_0x1b8ab7]+_0x428d43[_0x421b4e])%0x100]);}return _0x3b60e3;};iii1II['dQXUrt']=_0x1425d1,_0x4d1838=arguments,iii1II['AQNYxE']=!![];}const _0x1cd322=_0x6aa1d3[0x0],_0x449f59=_0x576316+_0x1cd322,_0xf37dc2=_0x4d1838[_0x449f59];return!_0xf37dc2?(iii1II['VeLswS']===undefined&&(iii1II['VeLswS']=!![]),_0x191ef0=iii1II['dQXUrt'](_0x191ef0,_0x3e323a),_0x4d1838[_0x449f59]=_0x191ef0):_0x191ef0=_0xf37dc2,_0x191ef0;},iii1II(_0x4d1838,_0xd93ca6);}let cookie='';const cookiesArr=Object[IiII(0x1b2,'q[6G')](jdCookie)[IiII(0x154,'F%3[')](l1l1II=>jdCookie[l1l1II])[IiII(0x156,')8zk')](Iil1I1=>Iil1I1);!cookiesArr[0x0]&&($['msg']($['name'],IiII(0x17d,'a)%9')),process['exit'](0x1));!(async()=>{const llIIli=IiII,Ii1iII={'GpHZl':function(l1i11I,II11II){return l1i11I(II11II);},'YUnqL':llIIli(0x122,'HH^z'),'VMCFD':llIIli(0x145,'TwHr'),'TCEPN':function(Ii1iI1,lilIli,Iliili){return Ii1iI1(lilIli,Iliili);},'IngFq':llIIli(0x15c,'YKfE'),'wbkPt':llIIli(0x183,'wH[K'),'PXVHh':llIIli(0x14d,'U*ju'),'UWCDm':llIIli(0x152,'yEmq'),'ELEZJ':llIIli(0x19c,'qw$('),'VIYtB':function(Iliill,IIII11){return Iliill<IIII11;},'lEwzw':function(i1illi,i1illl){return i1illi+i1illl;},'nksPG':function(I1llil,I1llii){return I1llil(I1llii);},'ugfCd':llIIli(0x1fb,'YR7I'),'IaFos':'lite','cWPrJ':function(lilIll){return lilIll();},'XiXcT':function(l1i111,iliII1){return l1i111+iliII1;},'oVCbB':function(II11I1,Iii11I){return II11I1(Iii11I);},'kIewb':function(Iil1II,iIIl1I,I1iIli){return Iil1II(iIIl1I,I1iIli);},'WvMfF':function(lI1Ill,lI1Ili){return lI1Ill*lI1Ili;}};authorCodeList=await Ii1iII[llIIli(0x127,'uGa%')](getAuthorCodeList,Ii1iII[llIIli(0x201,'TwHr')]);if(authorCodeList)console[llIIli(0x1c7,')8zk')](Ii1iII['VMCFD']),$[llIIli(0x198,'Ob)Z')]=authorCodeList[Ii1iII['TCEPN'](random,0x0,authorCodeList[llIIli(0x1fd,'^gx5')])];else{let IliilI=[Ii1iII[llIIli(0x1c8,'@oC)')],Ii1iII[llIIli(0x20f,']I$C')],Ii1iII[llIIli(0x13f,'WCRG')],Ii1iII['UWCDm']];$[llIIli(0x17a,'#dI[')]=IliilI[random(0x0,IliilI[llIIli(0x1df,'k@2V')])],console['log'](Ii1iII[llIIli(0x12e,'uGa%')]);}if(pddnum)console['log']('❖\x20已填写指定人数变量，指定人数\x20['+pddnum+']');pddcode?console['log']('❖\x20已填写指定助力变量，开始助力\x20['+pddcode+']'):console['log'](llIIli(0x1fe,'wH[K'));notify[llIIli(0x11d,'yEmq')]({'title':$[llIIli(0x149,'a68o')]});for(let i1II1=0x0;Ii1iII[llIIli(0x182,'#dI[')](i1II1,cookiesArr[llIIli(0x15e,'a68o')]);i1II1++){$[llIIli(0x167,'q[6G')]=Ii1iII['lEwzw'](i1II1,0x1),cookie=cookiesArr[i1II1],common[llIIli(0x226,'Z47z')](cookie),$[llIIli(0x1b4,'F%3[')]=Ii1iII[llIIli(0x228,'Z47z')](decodeURIComponent,common[llIIli(0x129,'aoeX')](cookie,Ii1iII[llIIli(0x18f,'4mR*')])),$['UA']=common[llIIli(0x22d,'a)%9')]($[llIIli(0x18c,'CV3@')],Ii1iII[llIIli(0x178,'q[6G')]),$[llIIli(0x16e,'HH^z')]=notify['create']($[llIIli(0x168,'RtU9')],$[llIIli(0x16c,'Anvv')]),$['nickName']='',console['log']('\x0a******开始【京东账号'+$[llIIli(0x161,'XVvf')]+'】'+($[llIIli(0x1f2,'QfzL')]||$[llIIli(0x179,'QfzL')])+'******\x0a'),$[llIIli(0x135,'a68o')]=Ii1iII[llIIli(0x1ff,'yEmq')](gen_jda_cookie),$['strList']=llIIli(0x142,'aoeX')+$[llIIli(0x14f,'OIw3')]['jda']+llIIli(0x207,'YKfE')+$[llIIli(0x200,'6l$H')][llIIli(0x1ed,'wH[K')]+';__jdc='+$['hash'][llIIli(0x138,'8zli')]+llIIli(0x187,'YKfE')+$['hash'][llIIli(0x15f,'XVvf')]+';;',$['uuid']=Ii1iII[llIIli(0x14e,']I$C')](new Date()[llIIli(0x143,'f%^^')]()+'',Ii1iII[llIIli(0x1d6,'KeD7')](parseInt,0x7fffffff*Math[llIIli(0x11b,'qw$(')]())),await Main(),common[llIIli(0x166,'KeD7')]();if($['PDDEnd']||$[llIIli(0x22c,')8zk')])break;await $[llIIli(0x196,'Z47z')](Ii1iII[llIIli(0x19a,'q[6G')](parseInt,Ii1iII[llIIli(0x189,'KeD7')](waitTimes,0x1)+0x64,0xa));}isNotify&&notify[llIIli(0x20d,'F%3[')]()&&(notify['appendContent']('\x0a'),await notify[llIIli(0x225,'4mR*')]());})()[IiII(0x1bf,'aoeX')](iIIl11=>$[IiII(0x177,'f%^^')](iIIl11))[IiII(0x1c4,'TwHr')](()=>$['done']());async function Main(){const lIII1I=IiII,l1l1I1={'xJYKp':lIII1I(0x213,'x[ae'),'RcZYq':function(I1iIll,I1lliI){return I1iIll(I1lliI);},'eMULG':function(llIllI,I1ilI1){return llIllI(I1ilI1);},'nRmUB':function(iillll,lIIilI){return iillll==lIIilI;},'eVSxA':function(II1li1){return II1li1();}};$[lIII1I(0x113,'f%^^')]=!![];try{if(pddcode)$[lIII1I(0x172,'a)%9')]==0x1?(console[lIII1I(0x1d5,'x[ae')](l1l1I1[lIII1I(0x181,'uGa%')]),await l1l1I1['RcZYq'](inviteFissionhelp,$[lIII1I(0x198,'Ob)Z')])):await l1l1I1[lIII1I(0x112,'U*ju')](inviteFissionhelp,pddcode);else{if(l1l1I1['nRmUB']($[lIII1I(0x168,'RtU9')],0x1)){console[lIII1I(0x190,'Z47z')](l1l1I1[lIII1I(0x160,'WCRG')]),await l1l1I1['eVSxA'](inviteFissionHome);if($['runEnd'])return;await l1l1I1[lIII1I(0x18a,'#dI[')](inviteFissionhelp,$[lIII1I(0x1ae,'uGa%')]);}else await inviteFissionhelp($[lIII1I(0x1d7,'QfzL')]);}}catch(l1lIlI){console['log'](lIII1I(0x17f,'WCRG')+l1lIlI);}}async function inviteFissionHome(){const illIlI=IiII,IiiIl1={'ntmRq':function(lIIil1,IIli1){return lIIil1(IIli1);},'SqPcQ':illIlI(0x217,'a)%9'),'tpVuS':function(II1liI,IlI1i1){return II1liI*IlI1i1;},'MvUhD':function(l1lIl1,IiiIlI){return l1lIl1(IiiIlI);},'Ftwoq':function(Iilli1,I1l1Il,llIll1){return Iilli1(I1l1Il,llIll1);},'TstWn':function(Illl1l,Illl1i){return Illl1l+Illl1i;},'WFzOD':illIlI(0x1d0,'q[6G')};await IiiIl1[illIlI(0x1b1,'8zli')](sendRequest,IiiIl1[illIlI(0x21b,'ny*g')]);if($[illIlI(0x21c,'8zli')])return;await $[illIlI(0x1bc,'nM%5')](parseInt(IiiIl1[illIlI(0x1de,'kR&0')](waitTimes,0x1)+0x64,0xa)),await IiiIl1['MvUhD'](sendRequest,'inviteFissionHome'),await $['wait'](IiiIl1[illIlI(0x1a2,'nM%5')](parseInt,IiiIl1['TstWn'](IiiIl1[illIlI(0x221,'f%^^')](waitTimes,0x1),0x64),0xa));if($['inviteFissionHome']?.[illIlI(0x21a,'Ob)Z')]){$[illIlI(0x180,'r)Uw')]=$[illIlI(0x209,'D3U#')]?.[illIlI(0x1c1,'2EXs')];const lIIiil=new Date()['valueOf'](),l1lIii=IiiIl1[illIlI(0x1a6,'XVvf')]($[illIlI(0x1ec,'YR7I')]?.[illIlI(0x13b,'uGa%')],lIIiil),I11iI1=$[illIlI(0x162,'F%3[')](IiiIl1[illIlI(0x144,'CV3@')],l1lIii);console[illIlI(0x1e4,'QfzL')](illIlI(0x1ad,'HH^z')+I11iI1+illIlI(0x11a,'Ob)Z')+$['shareinviter']);}else console[illIlI(0x1d5,'x[ae')](illIlI(0x1e7,'29DM')),$['runEnd']=!![];}async function inviteFissionhelp(l1lIil){const liIiI=IiII,IiiIli={'YnCLB':function(iillli,I1l1Ii){return iillli(I1l1Ii);}};$[liIiI(0x1b8,'^gx5')]=l1lIil,await IiiIli[liIiI(0x1d4,'&)ud')](sendRequest,'inviteFissionhelp');}async function handleResponse(I1i11i,I1i11l){const l1il1I=IiII,llIlii={'IwZtB':'inviteFissionhelp','FyNQl':function(llIlil,IIlil){return llIlil===IIlil;},'wkMAH':function(ilI1lI,IiiIll){return ilI1lI==IiiIll;},'BZxwn':function(IIlii,IlI1il){return IIlii<=IlI1il;},'bxlAP':function(IilliI,IlI1ii){return IilliI==IlI1ii;},'uLgUE':l1il1I(0x1f7,'wH[K'),'ZdfZm':function(lIIiii,iI1lli){return lIIiii===iI1lli;}};try{switch(I1i11i){case llIlii[l1il1I(0x111,'^gx5')]:if(llIlii['FyNQl'](I1i11l?.[l1il1I(0x169,'6l$H')],0x0)&&llIlii[l1il1I(0x1cf,'TwHr')](I1i11l?.['success'],!![])){$[l1il1I(0x117,'U*ju')]=I1i11l['data'];switch($['inviteFissionhelp']?.['helpResult']){case null:console['log'](l1il1I(0x1aa,'D3U#'));break;case 0x0:console['log'](l1il1I(0x130,'QfzL'));break;case 0x1:if(llIlii['wkMAH']($[l1il1I(0x186,'^gx5')],0x1))console[l1il1I(0x223,'yEmq')]('✅\x20助力成功\x20[感谢]');else{$[l1il1I(0x153,']I$C')]++,console[l1il1I(0x20c,'dmMJ')](l1il1I(0x197,'OYj1')+$[l1il1I(0x12c,'dmMJ')]+']');if(pddnum){if(llIlii[l1il1I(0x121,'nM%5')](pddnum,$['helpnum'])){console['log'](l1il1I(0x173,'2EXs')),$[l1il1I(0x132,'TwHr')]=!![];return;}}}break;case 0x2:console[l1il1I(0x110,'wH[K')](l1il1I(0x1d1,'U*ju'));break;case 0x3:console['log'](l1il1I(0x12a,'RtU9'));break;case 0x6:console[l1il1I(0x223,'yEmq')]('❌\x20已助力过了');break;case 0x8:if(llIlii[l1il1I(0x124,')8zk')]($[l1il1I(0x1d8,'HH^z')],0x1)){console[l1il1I(0x211,'RtU9')](l1il1I(0x222,'x*3x'));break;}else{console[l1il1I(0x17e,'r)Uw')](l1il1I(0x1cb,'4mR*'));return;}default:{console[l1il1I(0x227,'aoeX')]('[未知助力状态]:['+helpResult+']');break;}}}else{if(I1i11l['data']?.[l1il1I(0x1fc,'OIw3')])console['log']('>\x20'+I1i11l[l1il1I(0x188,'m@)p')]);else{if(I1i11l[l1il1I(0x114,'Z47z')])console[l1il1I(0x110,'wH[K')]('>\x20'+I1i11l['errMsg']);else I1i11l[l1il1I(0x20a,'4mR*')]?console[l1il1I(0x163,'bW*B')]('>\x20'+I1i11l['msg']):console['log']('❓'+I1i11i+'\x20'+JSON['stringify'](I1i11l));}}break;case llIlii[l1il1I(0x1d9,')8zk')]:if(llIlii[l1il1I(0x1a7,'XVvf')](I1i11l?.['code'],0x0)&&I1i11l?.[l1il1I(0x174,'a68o')]===!![])$[l1il1I(0x125,'XVvf')]=I1i11l[l1il1I(0x16f,'e)9$')];else{if(I1i11l[l1il1I(0x19d,'x*3x')]?.[l1il1I(0x128,'9CIc')])console['log']('>\x20'+I1i11l['data']?.[l1il1I(0x123,'29DM')]+'}');else{if(I1i11l['errMsg'])$[l1il1I(0x22b,'a)%9')]=!![],console[l1il1I(0x1f1,'e)9$')]('>\x20'+I1i11l['errMsg']);else I1i11l[l1il1I(0x133,'HH^z')]?console[l1il1I(0x1c7,')8zk')]('>\x20'+I1i11l[l1il1I(0x18e,'TwHr')]):console['log']('❓'+I1i11i+'\x20'+JSON['stringify'](I1i11l));}}break;case'inviteFissionHome':if(llIlii[l1il1I(0x1c0,'WCRG')](I1i11l?.[l1il1I(0x218,'2EXs')],0x0)&&llIlii[l1il1I(0x13d,']I$C')](I1i11l?.[l1il1I(0x1fa,'ny*g')],!![]))$['inviteFissionHome']=I1i11l[l1il1I(0x210,'Z47z')];else{if(I1i11l[l1il1I(0x1a9,'OYj1')]?.[l1il1I(0x1e6,'ny*g')])console[l1il1I(0x1e3,'uGa%')]('>\x20'+I1i11l[l1il1I(0x17b,'aoeX')]?.['bizMsg']);else{if(I1i11l[l1il1I(0x16b,'wH[K')])$[l1il1I(0x1b9,'uGa%')]=!![],console[l1il1I(0x1cc,'#dI[')]('>\x20'+I1i11l[l1il1I(0x16a,'WCRG')]);else I1i11l[l1il1I(0x12b,'nM%5')]?console[l1il1I(0x110,'wH[K')]('>\x20'+I1i11l['msg']):console[l1il1I(0x18b,'m@)p')]('❓'+I1i11i+'\x20'+JSON['stringify'](I1i11l));}}break;}}catch(ll1iI){console[l1il1I(0x118,'&)ud')](l1il1I(0x216,'dmMJ')+I1i11i+'\x20请求响应\x20'+(ll1iI['message']||ll1iI));}}async function sendRequest(iI1lll){const Iiili=IiII,l1lIll={'uPBnA':Iiili(0x13a,'29DM'),'iiudU':'inviteFissionhelp','WCDIi':Iiili(0x1c2,'TwHr'),'facux':'4.7','JtAbR':'https://api.m.jd.com/client.action','shlbm':Iiili(0x1e1,']I$C'),'yiBow':'02f8d','WMthN':Iiili(0x195,'6l$H'),'sSSoR':Iiili(0x136,'f%^^'),'mkCMj':Iiili(0x18d,'WCRG'),'wNhYv':Iiili(0x1c6,'kR&0'),'ESYsP':'gzip,\x20deflate,\x20br','FvedA':Iiili(0x176,'yEmq'),'ldhqq':'XMLHttpRequest','QCFyT':function(l1lIli,lIIiiI){return l1lIli+lIIiiI;},'YnFvk':Iiili(0x214,'#dI['),'oLCKD':Iiili(0x137,'dmMJ'),'zIEGN':Iiili(0x171,'D3U#'),'jVlmr':Iiili(0x1ee,'TwHr'),'AtEiQ':function(II1lil,IIli1l){return II1lil<IIli1l;},'qvKKg':function(II1lii,lIIii1){return II1lii>lIIii1;},'TZMWI':function(ll1i1,IIli1i,I1iIi1){return ll1i1(IIli1i,I1iIi1);},'iOsRY':function(lliil1,IIllI){return lliil1>=IIllI;}};if($['runEnd'])return;let I1l1II='',IIli1I=null,I1i11I=null,llIliI=l1lIll['uPBnA'],I1l1I1={},I1i111={};switch(iI1lll){case l1lIll[Iiili(0x165,'XVvf')]:I1i111={'appId':l1lIll[Iiili(0x11f,']I$C')],'functionId':l1lIll[Iiili(0x1bb,']I$C')],'appid':Iiili(0x21d,'ny*g'),'clientVersion':common['getLatestLiteAppVersion'](),'client':Iiili(0x150,'TwHr'),'body':{'linkId':linkId,'isJdApp':!![],'inviter':$[Iiili(0x1be,'a68o')]},'version':l1lIll[Iiili(0x157,']I$C')],'ua':$['UA'],'t':!![]},I1l1I1=await H5st[Iiili(0x120,'kR&0')](I1i111),I1l1II=l1lIll[Iiili(0x220,'kR&0')],IIli1I=I1l1I1[Iiili(0x1a3,'4mR*')];break;case l1lIll['shlbm']:I1i111={'appId':l1lIll['yiBow'],'functionId':l1lIll[Iiili(0x1ca,'yEmq')],'appid':l1lIll['WMthN'],'clientVersion':common[Iiili(0x1f8,'^gx5')](),'client':l1lIll[Iiili(0x203,'yEmq')],'body':{'linkId':linkId,'isJdApp':!![],'inviter':''},'version':l1lIll['facux'],'ua':$['UA'],'t':!![]},I1l1I1=await H5st[Iiili(0x139,'XVvf')](I1i111),I1l1II=l1lIll[Iiili(0x206,'f%^^')],IIli1I=I1l1I1[Iiili(0x15d,'9CIc')];break;case'inviteFissionHome':I1i111={'appId':l1lIll[Iiili(0x191,'&)ud')],'functionId':l1lIll[Iiili(0x1e0,'x*3x')],'appid':l1lIll['WMthN'],'clientVersion':common['getLatestLiteAppVersion'](),'client':l1lIll[Iiili(0x175,'YR7I')],'body':{'linkId':linkId,'inviter':''},'version':l1lIll[Iiili(0x1af,'TwHr')],'ua':$['UA'],'t':!![]},I1l1I1=await H5st[Iiili(0x1cd,'m@)p')](I1i111),I1l1II=l1lIll[Iiili(0x1da,'Anvv')],IIli1I=I1l1I1[Iiili(0x13c,'WCRG')];break;default:console[Iiili(0x11e,'OYj1')]('❌\x20未知请求\x20'+iI1lll);return;}const ilI1li={};IIli1I&&(IIli1I={...IIli1I,...ilI1li});I1i11I&&(I1i11I={...I1i11I,...ilI1li});const IIliI={'url':I1l1II,'method':llIliI,'headers':{'Accept':Iiili(0x204,'Anvv'),'Accept-Encoding':l1lIll['ESYsP'],'Accept-Language':l1lIll[Iiili(0x1a5,'#dI[')],'Connection':'keep-alive','Content-Type':Iiili(0x199,'a68o'),'X-Requested-With':l1lIll[Iiili(0x1a4,')8zk')],'Cookie':l1lIll[Iiili(0x147,'Anvv')](cookie,$['strList']),'Referer':'https://pro.m.jd.com/jdlite/active/23CeE8ZXA4uFS9M9mTjtta9T4S5x/index.html','X-Referer-Page':l1lIll[Iiili(0x1b6,'4mR*')],'Origin':l1lIll[Iiili(0x1d2,'YKfE')],'x-rp-client':Iiili(0x1dc,'YKfE'),'User-Agent':$['UA']},'params':I1i11I,'data':IIli1I,'timeout':0x4e20};llIliI===l1lIll[Iiili(0x208,']I$C')]&&(delete IIliI[Iiili(0x210,'Z47z')],delete IIliI[Iiili(0x116,'f%^^')][l1lIll[Iiili(0x141,'Ob)Z')]]);const ilI1ll=0x1;let Iillii=0x0,IlI1iI=null,Iillil=![];while(l1lIll[Iiili(0x14a,'yEmq')](Iillii,ilI1ll)){l1lIll[Iiili(0x212,'TwHr')](Iillii,0x0)&&await $[Iiili(0x19f,'2EXs')](0x3e8);const lliilI=await common[Iiili(0x1f4,'a)%9')](IIliI);if(!lliilI[Iiili(0x15b,'WCRG')]){IlI1iI=Iiili(0x193,'CV3@')+iI1lll+Iiili(0x1eb,'dmMJ')+lliilI[Iiili(0x148,'29DM')],Iillii++;continue;}if(!lliilI?.['data']){IlI1iI=Iiili(0x170,'F%3[')+iI1lll+Iiili(0x184,'x*3x'),Iillii++;continue;}l1lIll[Iiili(0x1e5,'ny*g')](handleResponse,iI1lll,lliilI[Iiili(0x17b,'aoeX')]),Iillil=![];break;}l1lIll[Iiili(0x1b3,'8zli')](Iillii,ilI1ll)&&(console[Iiili(0x227,'aoeX')](IlI1iI),Iillil&&($[Iiili(0x1d3,'WCRG')]=!![],$['message']&&$[Iiili(0x11c,'WCRG')]['fix'](IlI1iI)));}function getAuthorCodeList(lili1){const IilIli=IiII,ll1l1={'UCZUV':IilIli(0x151,'a)%9')};return new Promise(IllIIi=>{const li1=IilIli,IllIIl={'url':''+lili1,'timeout':0x2710,'headers':{'User-Agent':ll1l1[li1(0x1f5,'OIw3')]}};$[li1(0x1f3,'&)ud')](IllIIl,async(IiiIi1,l1ii1,ii1ll)=>{const illIl1=li1;try{if(IiiIi1){}else ii1ll?ii1ll=JSON['parse'](ii1ll):console['log'](illIl1(0x158,'uGa%'));}catch(IliI1l){$[illIl1(0x1c5,'kR&0')](IliI1l,l1ii1),ii1ll=null;}finally{IllIIi(ii1ll);}});});}function gen_jda_cookie(){const l1llII=IiII,lliiil={'MLVDN':function(Illl1I,lliiiI){return Illl1I*lliiiI;},'bIVeF':function(lilil,ll1ll){return lilil-ll1ll;},'waEzL':function(Illl11,ii1lI){return Illl11+ii1lI;},'jYEJM':function(I1ilIl,I11iII){return I1ilIl*I11iII;},'aveIG':function(I1ilIi,IiiiI){return I1ilIi*IiiiI;},'kaiAo':l1llII(0x146,'x*3x')},lliiii='3';let IliI1i=Math['floor'](lliiil[l1llII(0x1ea,'@oC)')](0x8ca6bff,Math['random']()))['toString'](),ll1ii=[...Array(0xc)][l1llII(0x16d,'m@)p')](()=>Math[l1llII(0x12f,'6l$H')](Math[l1llII(0x1c9,'kR&0')]()*0xa))[l1llII(0x1f6,'YR7I')](''),IIli11=lliiil[l1llII(0x202,'&)ud')](timestamp(),0x30d40),IllIII=lliiil[l1llII(0x1ef,'WCRG')](IIli11,Math[l1llII(0x1f0,'Anvv')](lliiil['jYEJM'](Math[l1llII(0x12d,'2EXs')](),0x186a0))),ii1li=IllIII+Math[l1llII(0x1db,'HH^z')](lliiil[l1llII(0x192,'wH[K')](Math[l1llII(0x22e,'29DM')](),0x2710)),IIll1=IIli11+Math[l1llII(0x1f9,'OIw3')](Math['random']()*0x186a0),ll1il=[IliI1i,''+IIli11+ll1ii,IIli11[l1llII(0x1b7,'QfzL')](),IllIII[l1llII(0x194,'Z47z')](),ii1li['toString'](),lliiii][l1llII(0x1a0,'k@2V')]('.'),IiiIiI=[IliI1i,ll1ii[l1llII(0x215,'U*ju')](-0x2),''+IIli11+ll1ii+'|'+lliiii,ii1li[l1llII(0x115,'nM%5')]()]['join']('.'),lilii=IliI1i,l1iiI=[IliI1i,l1llII(0x1bd,'bW*B'),l1llII(0x1ce,'ny*g'),l1llII(0x20e,'a)%9'),lliiil[l1llII(0x1ba,'TwHr')],IIll1[l1llII(0x159,']I$C')]()],ll1li=encodeURIComponent(l1iiI['join']('|'));return{'jda':ll1il,'jdb':IiiIiI,'jdc':lilii,'jdv':ll1li};}function timestamp(){const IilIll=IiII,llIlli={'rrtRC':function(llIlll,lliii1){return llIlll/lliii1;}};return Math[IilIll(0x1c3,'XVvf')](llIlli[IilIll(0x1ab,'x[ae')](Date[IilIll(0x14c,'&)ud')](),0x3e8));}function random(Iiii1,lIIili){const lI11Ii=IiII,IiiIil={'DgfHx':function(IiiIii,IIlll){return IiiIii*IIlll;},'WpaaH':function(liliI,ll1lI){return liliI-ll1lI;}};return Math[lI11Ii(0x13e,'x[ae')](IiiIil[lI11Ii(0x15a,'uGa%')](Math['random'](),IiiIil[lI11Ii(0x1a8,'U*ju')](lIIili,Iiii1)))+Iiii1;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
